/*!
 * @theme card-theme
 * @auto-scaling true
 * @size 16:9 1280px 720px
 */

// =============================================================================
// THEME CONFIGURATION VARIABLES
// =============================================================================

// Color Palette - Catppuccin Mocha (configurable)
$ctp-base: #1e1e2e !default;
$ctp-mantle: #181825 !default;
$ctp-crust: #11111b !default;
$ctp-surface0: #313244 !default;
$ctp-surface1: #45475a !default;
$ctp-surface2: #585b70 !default;
$ctp-overlay0: #6c7086 !default;
$ctp-overlay1: #7f849c !default;
$ctp-overlay2: #9399b2 !default;
$ctp-subtext0: #a6adc8 !default;
$ctp-subtext1: #bac2de !default;
$ctp-text: #cdd6f4 !default;
$ctp-lavender: #b4befe !default;
$ctp-blue: #89b4fa !default;
$ctp-sapphire: #74c7ec !default;
$ctp-sky: #89dceb !default;
$ctp-teal: #94e2d5 !default;
$ctp-green: #a6e3a1 !default;
$ctp-yellow: #f9e2af !default;
$ctp-peach: #fab387 !default;
$ctp-maroon: #eba0ac !default;
$ctp-red: #f38ba8 !default;
$ctp-mauve: #cba6f7 !default;
$ctp-pink: #f5c2e7 !default;
$ctp-flamingo: #f2cdcd !default;
$ctp-rosewater: #f5e0dc !default;

// Theme-specific colors
$cover-bg: $ctp-crust !default;
$cover-text: $ctp-text !default;
$cover-accent: $ctp-mauve !default;
$cover-subtitle: $ctp-subtext1 !default;

// Typography - Readable sizes with golden ratio relationships
$font-family: 'Inter', 'Segoe UI', system-ui, sans-serif !default;

// Font hierarchy: Card content > Card title > Left section > Sources
// Pre-calculated phi-based values for maximum readability (avoiding tiny text)
$font-size-card-content: 18px !default;   // S - balanced readable size
$font-size-card-title: 11px !default;     // S/φ ≈ 11px (18/1.618)  
$font-size-left-section: 11px !default;   // Increased for readability (was 7px)
$font-size-sources: 9px !default;         // Increased for readability (was 4px)

$line-height: 1.6 !default;

// Layout
$slide-padding: 80px !default;
$card-padding: 40px !default;
$card-border-radius: 20px !default;
$card-border-width: 3px !default;

// Spacing
$spacing-xs: 8px !default;
$spacing-sm: 12px !default;
$spacing-md: 16px !default;
$spacing-lg: 24px !default;
$spacing-xl: 32px !default;
$spacing-xxl: 40px !default;

// =============================================================================
// BASE STYLES (Marpit-compliant)
// =============================================================================

:root {
  // CSS Custom Properties for runtime customization
  --ctp-base: #{$ctp-base};
  --ctp-mantle: #{$ctp-mantle};
  --ctp-crust: #{$ctp-crust};
  --ctp-surface0: #{$ctp-surface0};
  --ctp-surface1: #{$ctp-surface1};
  --ctp-surface2: #{$ctp-surface2};
  --ctp-overlay0: #{$ctp-overlay0};
  --ctp-overlay1: #{$ctp-overlay1};
  --ctp-overlay2: #{$ctp-overlay2};
  --ctp-subtext0: #{$ctp-subtext0};
  --ctp-subtext1: #{$ctp-subtext1};
  --ctp-text: #{$ctp-text};
  --ctp-lavender: #{$ctp-lavender};
  --ctp-blue: #{$ctp-blue};
  --ctp-sapphire: #{$ctp-sapphire};
  --ctp-sky: #{$ctp-sky};
  --ctp-teal: #{$ctp-teal};
  --ctp-green: #{$ctp-green};
  --ctp-yellow: #{$ctp-yellow};
  --ctp-peach: #{$ctp-peach};
  --ctp-maroon: #{$ctp-maroon};
  --ctp-red: #{$ctp-red};
  --ctp-mauve: #{$ctp-mauve};
  --ctp-pink: #{$ctp-pink};
  --ctp-flamingo: #{$ctp-flamingo};
  --ctp-rosewater: #{$ctp-rosewater};
  
  --cover-bg: #{$cover-bg};
  --cover-text: #{$cover-text};
  --cover-accent: #{$cover-accent};
  --cover-subtitle: #{$cover-subtitle};
}

// Base section styles (Marpit requirement)
section {
  width: 1280px;
  height: 720px;
  background: var(--ctp-base);
  color: var(--ctp-text);
  font-family: $font-family;
  font-size: $font-size-card-content;
  line-height: $line-height;
  margin: 0;
  padding: 0;
  position: relative;
  overflow: hidden;
}

// =============================================================================
// TITLE SLIDE STYLES
// =============================================================================

section.title {
  background: var(--cover-bg) !important;
  color: var(--cover-text) !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important;
  padding: $slide-padding !important;

  h1 {
    color: var(--cover-accent) !important;
    font-size: 3.5em !important;
    font-weight: 700 !important;
    margin-bottom: 30px !important;
    letter-spacing: 1px !important;
  }

  h3 {
    color: var(--cover-subtitle) !important;
    font-size: 1.8em !important;
    font-weight: 400 !important;
    margin-bottom: 40px !important;
  }

  em {
    color: var(--ctp-overlay1) !important;
    font-style: normal !important;
  }
}

// =============================================================================
// LEFT NOTES SIDEBAR (ALWAYS OUTSIDE CARDS)
// =============================================================================

.left-notes {
  position: absolute;
  top: 80px;
  left: 40px;
  width: calc(35% - 80px); // 35% of screen width for left sidebar
  height: calc(100% - 160px);
  overflow-y: auto;
  color: var(--ctp-subtext1);
  font-size: $font-size-left-section; // 11px (readable)
  line-height: 1.4;
  z-index: 5; // Always above cards
  padding-right: 20px;

  h2, h3 {
    color: var(--ctp-blue);
    font-size: 14px; // Larger headers for better hierarchy
    margin-top: $spacing-md;
    margin-bottom: $spacing-xs;
    font-weight: 600;
  }

  ul, ol {
    margin: $spacing-xs 0;
    padding-left: $spacing-sm;
  }

  li {
    margin: 2px 0;
    color: var(--ctp-subtext0);
    line-height: 1.3;
  }

  strong {
    color: var(--ctp-green);
    font-weight: 600;
  }

  em {
    color: var(--ctp-peach);
    font-style: italic;
  }

  p {
    margin: $spacing-xs 0;
    color: var(--ctp-subtext1);
    line-height: 1.3;
  }

  .sources {
    margin-top: $spacing-md;
    padding: $spacing-xs;
    border-top: 1px solid var(--ctp-surface1);
    font-size: $font-size-sources;
    color: var(--ctp-subtext0);
    background: var(--ctp-surface0);
    border-radius: 4px;
    margin-right: 10px;
    border: 1px solid var(--ctp-surface1);

    h1, h2, h3 {
      color: var(--ctp-blue);
      font-size: 12px; // Larger headers for sources
      margin-bottom: 2px;
      margin-top: $spacing-xs;
      font-weight: 600;
      line-height: 1.2;
    }

    strong {
      color: var(--ctp-green);
      font-weight: 600;
    }

    ul, ol {
      margin: 2px 0;
      padding-left: $spacing-xs;
    }

    li {
      margin: 1px 0;
      color: var(--ctp-subtext1);
      font-size: $font-size-sources;
      line-height: 1.2;
    }

    a {
      color: var(--ctp-sapphire) !important;
      text-decoration: none !important;
      border-bottom: 1px solid var(--ctp-sapphire) !important;
      display: inline-block !important;
      position: relative !important;
      z-index: 10 !important;
      font-weight: 500 !important;
      padding: 1px 0 !important;
      font-size: $font-size-sources !important;
    }

    a:hover {
      color: var(--ctp-blue) !important;
      border-bottom: 1px solid var(--ctp-blue) !important;
      background: var(--ctp-surface1) !important;
      padding: 1px 2px !important;
      border-radius: 2px !important;
    }

    p {
      margin: 2px 0;
      color: var(--ctp-subtext1);
      line-height: 1.2;
    }
  }
}

// =============================================================================
// CARD SYSTEM - DIV-BASED WRAPPING
// =============================================================================

// Card regions wrap content - 65% width on RIGHT side with proper margins for PDF continuity
.card-start,
.card-continue, 
.card-end {
  position: absolute;
  top: 80px;
  right: 60px;
  bottom: 80px;
  left: calc(35% + 20px); // Start after 35% left sidebar + gap
  padding: $card-padding;
  z-index: 3;
  overflow-y: auto;
  
  // Adjust for slides with titles
  &.has-title {
    top: 120px;
  }
}

// Card backgrounds - behind each card div with proper margins for PDF continuity
.card-start::before {
  content: '';
  position: absolute;
  top: -20px;
  right: -20px;
  bottom: -20px;
  left: -20px;
  background: var(--ctp-surface0);
  border: $card-border-width solid var(--ctp-mauve);
  border-radius: $card-border-radius $card-border-radius 0 0;
  border-bottom: none;
  box-shadow: 0 12px 40px rgba(17, 17, 27, 0.4);
  z-index: -1;
}

.card-continue::before {
  content: '';
  position: absolute;
  top: -80px;
  right: -20px;
  bottom: -80px;
  left: -20px;
  background: var(--ctp-surface0);
  border-left: $card-border-width solid var(--ctp-mauve);
  border-right: $card-border-width solid var(--ctp-mauve);
  box-shadow: 0 12px 40px rgba(17, 17, 27, 0.4);
  z-index: -1;
}

.card-end::before {
  content: '';
  position: absolute;
  top: -80px;
  right: -20px;
  bottom: -20px;
  left: -20px;
  background: var(--ctp-surface0);
  border: $card-border-width solid var(--ctp-mauve);
  border-radius: 0 0 $card-border-radius $card-border-radius;
  border-top: none;
  box-shadow: 0 12px 40px rgba(17, 17, 27, 0.4);
  z-index: -1;
}

// Single slide cards (start and end together)
.card-start.card-end::before {
  top: -20px;
  bottom: -20px;
  border: $card-border-width solid var(--ctp-mauve);
  border-radius: $card-border-radius;
}

// Typography inside card divs
  .card-start,
  .card-continue,
  .card-end {
        font-size: $font-size-card-content; // S = 18px (balanced)
    
    h1 {
      color: var(--ctp-mauve);
      font-size: 30px; // Large, readable card titles
      font-weight: 700;
      margin: 0 0 $spacing-lg 0;
      position: relative;
      z-index: 3;
    }

    h2 {
      color: var(--ctp-pink);
      font-size: 24px; // Readable card subtitles
      font-weight: 600;
      margin: $spacing-lg 0 $spacing-md 0;
      border-bottom: 2px solid var(--ctp-mauve);
      padding-bottom: $spacing-xs;
      position: relative;
      z-index: 3;
    }

  h3 {
    color: var(--ctp-yellow);
          font-size: $font-size-card-content;
    font-weight: 500;
    margin: 20px 0 $spacing-sm 0;
    position: relative;
    z-index: 3;
  }

  ul, ol {
    margin: $spacing-md 0;
    padding-left: $spacing-xl;
    position: relative;
    z-index: 3;
  }

  li {
    margin: $spacing-sm 0;
    line-height: 1.5;
    position: relative;
    z-index: 3;
  }

  p {
    margin: $spacing-md 0;
    line-height: 1.6;
    position: relative;
    z-index: 3;
  }

  strong {
    color: var(--ctp-green);
    font-weight: 600;
  }

  em {
    color: var(--ctp-peach);
    font-style: italic;
  }

  code {
    background: var(--ctp-surface0);
    color: var(--ctp-yellow);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 0.9em;
    border: 1px solid var(--ctp-surface1);
  }

  table {
    margin: $spacing-lg 0;
    border-collapse: collapse;
    width: 100%;
    position: relative;
    z-index: 3;

    th, td {
      border: 1px solid var(--ctp-surface1);
      padding: $spacing-sm;
      text-align: left;
    }

    th {
      background: var(--ctp-surface1);
      color: var(--ctp-text);
      font-weight: 600;
    }

    tr:nth-child(even) {
      background: var(--ctp-surface0);
    }
  }
}

// =============================================================================
// SLIDE TITLE (OPTIONAL)
// =============================================================================

.slide-title {
  position: absolute;
  top: 20px;
  left: calc(35% + 60px);
      right: 120px;
    color: var(--ctp-mauve);
        font-size: $font-size-card-title; // 11px
    font-weight: 600;
    text-align: center;
  z-index: 4;
  padding: $spacing-sm 0;
  border-bottom: 1px solid var(--ctp-mauve);
}

// =============================================================================
// GLOBAL ELEMENT STYLES (FALLBACKS)
// =============================================================================

section {
  h1 {
    color: var(--ctp-mauve);
    font-size: 2.5em;
    font-weight: 700;
    margin-bottom: $spacing-lg;
  }

  h2 {
    color: var(--ctp-pink);
    font-size: 2em;
    font-weight: 600;
    margin: $spacing-lg 0 $spacing-md 0;
    border-bottom: 2px solid var(--ctp-mauve);
    padding-bottom: $spacing-xs;
  }

  h3 {
    color: var(--ctp-yellow);
    font-size: 1.5em;
    font-weight: 500;
    margin: $spacing-lg 0 $spacing-sm 0;
  }

  ul, ol {
    margin: $spacing-md 0;
    padding-left: $spacing-xl;
  }

  li {
    margin: $spacing-sm 0;
    line-height: 1.5;
  }

  strong {
    color: var(--ctp-green);
    font-weight: 600;
  }

  em {
    color: var(--ctp-peach);
    font-style: italic;
  }

  code {
    background: var(--ctp-surface0);
    color: var(--ctp-yellow);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 0.9em;
    border: 1px solid var(--ctp-surface1);
  }

  a {
    color: var(--ctp-sapphire);
    text-decoration: underline;
    
    &:hover {
      color: var(--ctp-blue);
    }
  }
} 